<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ultrasound Analysis Report</title>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
                                                    * {
                                                      margin: 0;
                                                      padding: 0;
                                                      box-sizing: border-box;
                                                    }

                  .structure-name {
                    flex: 1;
                    font-weight: 600;
                    font-size: 1.1rem;
                    color: #2c3e50;
                    text-align: left;
                  }
                                                    body {
                                                      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                                                      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                                      min-height: 100vh;
                                                      color: #333;
                                                      line-height: 1.6;
                                                    }

                                                    .container {
                                                      max-width: 1200px;
                                                      margin: 0 auto;
                                                      padding: 20px;
                                                    }

                                                    .report-header {
                                                      background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
                                                      border-radius: 20px;
                                                      padding: 40px;
                                                      margin-bottom: 30px;
                                                      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
                                                      text-align: center;
                                                      border: 1px solid rgba(255, 255, 255, 0.2);
                                                    }

                                                    .report-header h1 {
                                                      color: #2c3e50;
                                                      font-size: 2.8rem;
                                                      margin-bottom: 10px;
                                                      font-weight: 300;
                                                      display: flex;
                                                      align-items: center;
                                                      justify-content: center;
                                                      gap: 15px;
                                                    }

                                                    .report-header .subtitle {
                                                      color: #7f8c8d;
                                                      font-size: 1.2rem;
                                                      margin-bottom: 20px;
                                                    }

                                                    .status-badge {
                                                      display: inline-flex;
                                                      align-items: center;
                                                      gap: 8px;
                                                      padding: 12px 24px;
                                                      border-radius: 50px;
                                                      font-weight: 600;
                                                      text-transform: uppercase;
                                                      letter-spacing: 1px;
                                                      font-size: 0.9rem;
                                                    }

                                                    .status-success {
                                                      background: linear-gradient(135deg, #00b894, #00cec9);
                                                      color: white;
                                                      box-shadow: 0 4px 15px rgba(0, 184, 148, 0.3);
                                                    }

                                                    .status-warning {
                                                      background: linear-gradient(135deg, #fdcb6e, #e17055);
                                                      color: white;
                                                      box-shadow: 0 4px 15px rgba(253, 203, 110, 0.3);
                                                    }

                                                    .meta-info {
                                                      display: grid;
                                                      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                                                      gap: 20px;
                                                      margin-bottom: 30px;
                                                    }

                                                    .meta-card {
                                                      background: rgba(255, 255, 255, 0.95);
                                                      backdrop-filter: blur(10px);
                                                      border-radius: 16px;
                                                      padding: 25px;
                                                      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                                                      border: 1px solid rgba(255, 255, 255, 0.2);
                                                      transition:
                                                        transform 0.3s ease,
                                                        box-shadow 0.3s ease;
                                                    }

                                                    .meta-card:hover {
                                                      transform: translateY(-5px);
                                                      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
                                                    }

                                                    .meta-card-header {
                                                      display: flex;
                                                      align-items: center;
                                                      margin-bottom: 15px;
                                                    }

                                                    .meta-card-icon {
                                                      width: 50px;
                                                      height: 50px;
                                                      border-radius: 12px;
                                                      display: flex;
                                                      align-items: center;
                                                      justify-content: center;
                                                      margin-right: 15px;
                                                      font-size: 1.4rem;
                                                      color: white;
                                                    }

                                                    .icon-date {
                                                      background: linear-gradient(135deg, #6c5ce7, #a29bfe);
                                                    }
                                                    .icon-age {
                                                      background: linear-gradient(135deg, #fd79a8, #fdcb6e);
                                                    }
                                                    .icon-weeks {
                                                      background: linear-gradient(135deg, #00b894, #00cec9);
                                                    }
                                                    .icon-method {
                                                      background: linear-gradient(135deg, #0984e3, #74b9ff);
                                                    }

                                                    .meta-card h3 {
                                                      color: #2c3e50;
                                                      font-size: 0.9rem;
                                                      text-transform: uppercase;
                                                      letter-spacing: 1px;
                                                      font-weight: 600;
                                                    }

                                                    .meta-card p {
                                                      color: #34495e;
                                                      font-size: 1.3rem;
                                                      font-weight: 700;
                                                      margin-top: 5px;
                                                    }

                                                    .analysis-section {
                                                      background: rgba(255, 255, 255, 0.95);
                                                      backdrop-filter: blur(10px);
                                                      border-radius: 20px;
                                                      padding: 40px;
                                                      margin-bottom: 30px;
                                                      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
                                                      border: 1px solid rgba(255, 255, 255, 0.2);
                                                    }

                                                    .section-title {
                                                      display: flex;
                                                      align-items: center;
                                                      gap: 15px;
                                                      margin-bottom: 30px;
                                                      padding-bottom: 20px;
                                                      border-bottom: 2px solid #ecf0f1;
                                                    }

                                                    .section-title h2 {
                                                      color: #2c3e50;
                                                      font-size: 2rem;
                                                      font-weight: 300;
                                                    }

                                                    .section-icon {
                                                      width: 60px;
                                                      height: 60px;
                                                      border-radius: 15px;
                                                      display: flex;
                                                      align-items: center;
                                                      justify-content: center;
                                                      font-size: 1.8rem;
                                                      color: white;
                                                      background: linear-gradient(135deg, #667eea, #764ba2);
                                                    }

                                                    .risk-assessment {
                                                      display: grid;
                                                      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                                                      gap: 25px;
                                                      margin-bottom: 30px;
                                                    }

                                                    .risk-card {
                                                      padding: 30px;
                                                      border-radius: 16px;
                                                      border-left: 6px solid;
                                                      background: white;
                                                      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
                                                      transition: all 0.3s ease;
                                                      position: relative;
                                                      overflow: hidden;
                                                    }

                                                    .risk-card::before {
                                                      content: "";
                                                      position: absolute;
                                                      top: 0;
                                                      left: 0;
                                                      right: 0;
                                                      height: 4px;
                                                      background: inherit;
                                                    }

                                                    .risk-card:hover {
                                                      transform: translateY(-8px);
                                                      box-shadow: 0 15px 45px rgba(0, 0, 0, 0.12);
                                                    }

                                                    .risk-low {
                                                      border-left-color: #00b894;
                                                      background: linear-gradient(135deg, #f8fffe 0%, #e8f8f5 100%);
                                                    }

                                                    .risk-moderate {
                                                      border-left-color: #fdcb6e;
                                                      background: linear-gradient(135deg, #fffef8 0%, #fff8e1 100%);
                                                    }

                                                    .risk-high {
                                                      border-left-color: #e17055;
                                                      background: linear-gradient(135deg, #fff8f5 0%, #ffebee 100%);
                                                    }

                                                    .risk-header {
                                                      display: flex;
                                                      align-items: center;
                                                      margin-bottom: 20px;
                                                    }

                                                    .risk-header h3 {
                                                      color: #2c3e50;
                                                      font-size: 1.4rem;
                                                      font-weight: 600;
                                                      margin-left: 12px;
                                                    }

                                                    .measurement-grid {
                                                      display: grid;
                                                      gap: 12px;
                                                    }

                                                    .measurement-row {
                                                      display: flex;
                                                      justify-content: space-between;
                                                      align-items: center;
                                                      padding: 12px 0;
                                                      border-bottom: 1px solid rgba(0, 0, 0, 0.1);
                                                    }

                                                    .measurement-row:last-child {
                                                      border-bottom: none;
                                                    }

                                                    .measurement-label {
                                                      color: #7f8c8d;
                                                      font-weight: 500;
                                                    }

                                                    .measurement-value {
                                                      font-weight: 700;
                                                      color: #2c3e50;
                                                      font-size: 1.1rem;
                                                    }

                                                    .structures-grid {
                                                      display: grid;
                                                      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                                                      gap: 20px;
                                                      margin: 30px 0;
                                                    }

                                                    .structure-card {
                                                      background: white;
                                                      border-radius: 16px;
                                                      padding: 25px;
                                                      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
                                                      border-left: 5px solid;
                                                      transition: all 0.3s ease;
                                                      position: relative;
                                                    }

                                                    .structure-card:hover {
                                                      transform: translateY(-5px);
                                                      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.12);
                                                    }

                                                    .structure-detected {
                                                      border-left-color: #00b894;
                                                      background: linear-gradient(135deg, #f8fffe 0%, #e8f8f5 100%);
                                                    }

                                                    .structure-not-detected {
                                                      border-left-color: #e17055;
                                                      background: linear-gradient(135deg, #fff8f5 0%, #ffebee 100%);
                                                    }

                                                    .structure-header {
                                                      display: flex;
                                                      justify-content: space-between;
                                                      align-items: center;
                                                      margin-bottom: 15px;
                                                    }

                                                    .structure-name {
                                                      font-weight: 700;
                                                      color: #2c3e50;
                                                      font-size: 1.1rem;
                                                    }

                                                    .detection-badge {
                                                      padding: 6px 12px;
                                                      border-radius: 20px;
                                                      font-size: 0.8rem;
                                                      font-weight: 600;
                                                      text-transform: uppercase;
                                                      display: flex;
                                                      align-items: center;
                                                      gap: 6px;
                                                    }

                                                    .badge-detected {
                                                      background: #00b894;
                                                      color: white;
                                                    }

                                                    .badge-not-detected {
                                                      background: #e17055;
                                                      color: white;
                                                    }

                                                    .confidence-meter {
                                                      margin: 15px 0;
                                                    }

                                                    .confidence-bar {
                                                      width: 100%;
                                                      height: 8px;
                                                      background: #ecf0f1;
                                                      border-radius: 4px;
                                                      overflow: hidden;
                                                      margin: 8px 0;
                                                    }

                                                    .confidence-fill {
                                                      height: 100%;
                                                      background: linear-gradient(90deg, #00b894, #00cec9);
                                                      border-radius: 4px;
                                                      transition: width 1s ease;
                                                    }

                                                    .confidence-text {
                                                      text-align: center;
                                                      font-weight: 600;
                                                      color: #00b894;
                                                      font-size: 0.9rem;
                                                    }

                                                    .structures-section .card-header i {
                                                      background: linear-gradient(135deg, #43e97b, #38f9d7);
                                                    }

                                                   .container {
                                          max-width: 1200px;
                                          margin: 0 auto;
                                          padding: 0 20px;
                                         }

                                         .header {
                                          text-align: center;
                                          margin-bottom: 40px;
                                          color: white;
                                         }

                                         .header h1 {
                                          font-size: 2.5rem;
                                          font-weight: 700;
                                          margin-bottom: 10px;
                                         text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
                                         }

                                         .header p {
                                          font-size: 1.1rem;
                                          opacity: 0.9;
                                         }

                                                    @media (max-width: 768px) {
                                                      .results-grid {
                                                        grid-template-columns: 1fr;
                                                        gap: 20px;
                                                      }
                                                    }
                                                    .card {
                                                      background: white;
                                                      border-radius: 20px;
                                                      padding: 30px;
                                                      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
                                                      transition:
                                                        transform 0.3s ease,
                                                        box-shadow 0.3s ease;
                                                    }

                                                    .card:hover {
                                                      transform: translateY(-5px);
                                                      box-shadow: 0 30px 60px rgba(0, 0, 0, 0.15);
                                                    }

                                                    .card-header {
                                                      display: flex;
                                                      align-items: center;
                                                      margin-bottom: 20px;
                                                      padding-bottom: 15px;
                                                      border-bottom: 2px solid #f0f0f0;
                                                    }

                                                    .card-header i {
                                                      font-size: 1.5rem;
                                                      margin-right: 15px;
                                                      padding: 10px;
                                                      border-radius: 12px;
                                                      color: white;
                                                    }

                                                    .card-header h3 {
                                                      font-size: 1.4rem;
                                                      font-weight: 600;
                                                      color: #2d3748;
                                                    }

                                                    .image-section .card-header i {
                                                      background: linear-gradient(135deg, #667eea, #764ba2);
                                                    }

                                                    .summary-section .card-header i {
                                                      background: linear-gradient(135deg, #4facfe, #00f2fe);
                                                    }

                                                    .structures-section .card-header i {
                                                      background: linear-gradient(135deg, #43e97b, #38f9d7);
                                                    }

                                                    .chart-section .card-header i {
                                                      background: linear-gradient(135deg, #fa709a, #fee140);
                                                    }

                                                    .image-container {
                                                      position: relative;
                                                      border-radius: 15px;
                                                      overflow: hidden;
                                                      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                                                    }

                                                    .image-container img {
                                                      width: 100%;
                                                      height: auto;
                                                      display: block;
                                                      transition: transform 0.3s ease;
                                                    }

                                                    .image-container:hover img {
                                                      transform: scale(1.02);
                                                    }

                                                    .summary-grid {
                                                      display: grid;
                                                      gap: 15px;
                                                    }

                                                    .summary-item {
                                                      display: flex;
                                                      justify-content: space-between;
                                                      align-items: center;
                                                      padding: 15px;
                                                      background: #f8fafc;
                                                      border-radius: 12px;
                                                      border-left: 4px solid #667eea;
                                                    }

                                                    .summary-label {
                                                      font-weight: 500;
                                                      color: #4a5568;
                                                    }

                                                    .summary-value {
                                                      font-weight: 600;
                                                      color: #2d3748;
                                                    }

                                                    .risk-badge {
                                                      padding: 8px 16px;
                                                      border-radius: 20px;
                                                      font-weight: 600;
                                                      font-size: 0.9rem;
                                                      text-transform: uppercase;
                                                      letter-spacing: 0.5px;
                                                    }

                                                    .risk-low {
                                                      background: linear-gradient(135deg, #48bb78, #38a169);
                                                      color: white;
                                                    }

                                                    .risk-moderate {
                                                      background: linear-gradient(135deg, #ed8936, #dd6b20);
                                                      color: white;
                                                    }

                                                    .risk-high {
                                                      background: linear-gradient(135deg, #f56565, #e53e3e);
                                                      color: white;
                                                    }

                                                    .risk-unknown {
                                                      background: linear-gradient(135deg, #718096, #4a5568);
                                                      color: white;
                                                    }

                                                    .image-section .card-header i {
                                                      background: linear-gradient(135deg, #667eea, #764ba2);
                                                    }

                                                    .summary-section .card-header i {
                                                      background: linear-gradient(135deg, #4facfe, #00f2fe);
                                                    }

                                                    .structures-section .card-header i {
                                                      background: linear-gradient(135deg, #43e97b, #38f9d7);
                                                    }

                                                    .chart-section .card-header i {
                                                      background: linear-gradient(135deg, #fa709a, #fee140);
                                                    }

                                                    .image-section {
                                                      text-align: center;
                                                      margin: 40px 0;
                                                    }
                                                    .structures-list {
                                                      display: grid;
                                                      gap: 10px;
                                                    }
                        .structure-item {
                          display: flex;
                          justify-content: space-between;
                          align-items: center;
                          padding: 16px 20px;
                          border-radius: 12px;
                          background: #f8f9fa;
                          margin-bottom: 12px;
                          border-left: 5px solid #667eea;
                        }
                              .card-header h3 {
                                           font-size: 1.4rem;
                                           font-weight: 600;
                                           color: #2d3748;
                                         }

                                         .structures-list {
                                           display: flex;
                                           flex-direction: column;
                                           gap: 12px;
                                           margin-top: 20px;
                                         }

                                         .structure-item {
                                           display: flex;
                                           flex-direction: column;
                                           background: #f8f9fa;
                                           padding: 16px 20px;
                                           border-radius: 12px;
                                           border-left: 5px solid #667eea;
                                           box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
                                           transition: transform 0.3s ease;
                                         }

                                         .structure-item:hover {
                                           transform: translateY(-2px);
                                         }

                                         .structure-name {
                                           font-weight: 600;
                                           font-size: 1.1rem;
                                           color: #2c3e50;
                                           margin-bottom: 10px;
                                         }

                                         .confidence-container {
                                           display: flex;
                                           flex-direction: column;
                                           gap: 6px;
                                         }

                                         .confidence-bar-wrapper {
                                           display: flex;
                                           align-items: center;
                                           gap: 12px;
                                         }

                                         .confidence-bar-bg {
                                           flex: 1;
                                           height: 10px;
                                           background-color: #e2e8f0;
                                           border-radius: 6px;
                                           overflow: hidden;
                                         }

                                         .confidence-bar-fill {
                                           height: 100%;
                                           transition: width 1s ease;
                                         }

                                         .confidence-percent {
              min-width: 50px;
              font-size: 0.9rem;
              font-weight: 600;
              color: #4a5568;
              text-align: right;
            }                                        .structure-item:hover {
                                                      background: linear-gradient(135deg, #edf2f7, #e2e8f0);
                                                      transform: translateX(5px);
                                                    }

                                                    .structure-name {
                                                      font-weight: 500;
                                                      color: #2d3748;
                                                    }

                                                    .confidence-bar {
                                                      display: flex;
                                                      align-items: center;
                                                      gap: 10px;
                                                    }

                                                   .confidence-progress {
        flex: 1;
        height: 10px;
        background-color: #e2e8f0;
        border-radius: 6px;
        overflow: hidden;
        position: relative;
      }
                                                    .confidence-fill {
                                                      height: 100%;
                                                      border-radius: 3px;
                                                      transition: width 0.6s ease;
                                                    }

                                                    .confidence-text {
                                                      font-weight: 600;
                                                      font-size: 0.9rem;
                                                      color: #4a5568;
                                                      min-width: 40px;
                                                    }

                                                    .full-width-card {
                                                      grid-column: 1 / -1;
                                                    }

                                                    .action-buttons {
                                                      display: flex;
                                                      gap: 15px;
                                                      justify-content: center;
                                                      margin-top: 30px;
                                                    }

                                                    .btn {
                                                      padding: 15px 30px;
                                                      border: none;
                                                      border-radius: 12px;
                                                      font-weight: 600;
                                                      font-size: 1rem;
                                                      text-decoration: none;
                                                      text-align: center;
                                                      cursor: pointer;
                                                      transition: all 0.3s ease;
                                                      display: inline-flex;
                                                      align-items: center;
                                                      gap: 10px;
                                                    }

                                                    .btn-primary {
                                                      background: linear-gradient(135deg, #667eea, #764ba2);
                                                      color: white;
                                                    }

                                                    .btn-primary:hover {
                                                      background: linear-gradient(135deg, #5a67d8, #6b46c1);
                                                      transform: translateY(-2px);
                                                      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
                                                    }

                                                    .btn-secondary {
                                                      background: linear-gradient(135deg, #718096, #4a5568);
                                                      color: white;
                                                    }

                                                    .btn-secondary:hover {
                                                      background: linear-gradient(135deg, #4a5568, #2d3748);
                                                      transform: translateY(-2px);
                                                      box-shadow: 0 10px 25px rgba(113, 128, 150, 0.4);
                                                    }

                                                    .loading-shimmer {
                                                      background: linear-gradient(
                                                        90deg,
                                                        #f0f0f0 25%,
                                                        #e0e0e0 50%,
                                                        #f0f0f0 75%
                                                      );
                                                      background-size: 200% 100%;
                                                      animation: shimmer 1.5s infinite;
                                                    }

                                   .action-section {
                                                      display: flex;
                                                      justify-content: center;
                                                      gap: 20px;
                                                      margin: 40px 0;
                                                      flex-wrap: wrap;
                                                    }

                                                    .action-btn {
                                                      padding: 15px 30px;
                                                      border: none;
                                                      border-radius: 50px;
                                                      font-size: 1rem;
                                                      font-weight: 600;
                                                      cursor: pointer;
                                                      transition: all 0.3s ease;
                                                      text-decoration: none;
                                                      display: inline-flex;
                                                      align-items: center;
                                                      gap: 10px;
                                                      text-transform: uppercase;
                                                      letter-spacing: 1px;
                                                    }

                                                    .btn-primary {
                                                      background: linear-gradient(135deg, #667eea, #764ba2);
                                                      color: white;
                                                      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
                                                    }

                                                    .btn-primary:hover {
                                                      transform: translateY(-3px);
                                                      box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
                                                    }

                                                    .btn-secondary {
                                                      background: linear-gradient(135deg, #00b894, #00cec9);
                                                      color: white;
                                                      box-shadow: 0 8px 25px rgba(0, 184, 148, 0.3);
                                                    }

                                                    .btn-secondary:hover {
                                                      transform: translateY(-3px);
                                                      box-shadow: 0 15px 35px rgba(0, 184, 148, 0.4);
                                                    }

                                                    .disclaimer {
                                                      background: linear-gradient(135deg, #fff3cd, #ffeaa7);
                                                      border: 2px solid #f39c12;
                                                      border-radius: 16px;
                                                      padding: 30px;
                                                      margin: 40px 0;
                                                      box-shadow: 0 8px 30px rgba(243, 156, 18, 0.1);
                                                    }

                                                    .disclaimer-title {
                                                      display: flex;
                                                      align-items: center;
                                                      gap: 12px;
                                                      margin-bottom: 15px;
                                                      color: #d68910;
                                                      font-size: 1.3rem;
                                                      font-weight: 700;
                                                    }

                                                    .disclaimer p {
                                                      color: #8b6914;
                                                      font-size: 1rem;
                                                      line-height: 1.7;
                                                    }
                                                    @keyframes shimmer {
                                                      0% {
                                                        background-position: -200% 0;
                                                      }
                                                      100% {
                                                        background-position: 200% 0;
                                                      }
                                                    }

                                                    .status-indicator {
                                                      display: inline-flex;
                                                      align-items: center;
                                                      gap: 8px;
                                                      padding: 6px 12px;
                                                      border-radius: 20px;
                                                      font-size: 0.85rem;
                                                      font-weight: 500;
                                                    }

                                                    .status-success {
                                                      background: #f0fff4;
                                                      color: #22543d;
                                                      border: 1px solid #c6f6d5;
                                                    }

                                                    .status-warning {
                                                      background: #fffbeb;
                                                      color: #744210;
                                                      border: 1px solid #fed7aa;
                                                    }

                                                    .status-error {
                                                      background: #fef2f2;
                                                      color: #742a2a;
                                                      border: 1px solid #fecaca;
                                                    }

                                                     .disclaimer {
                                                background: linear-gradient(135deg, #fef5e7, #fed7aa);
                                                border: 1px solid #f6ad55;
                                                border-radius: 15px;
                                                padding: 20px;
                                                margin-top: 30px;
                                                text-align: center;
                                               }

                                               .disclaimer i {
                                                font-size: 1.5rem;
                                                color: #c05621;
                                                margin-bottom: 10px;
                                               }

                                               .disclaimer p {
                                                color: #744210;
                                                font-size: 0.95rem;
                                                line-height: 1.6;
                                                    .image-section {
                                                      text-align: center;
                                                      margin: 40px 0;
                                                    }

                                                    .annotated-image {
                                                      max-width: 100%;
                                                      height: auto;
                                                      border-radius: 16px;
                                                      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
                                                      border: 8px solid white;
                                                    }

                                                    .findings-grid {
                                                      display: grid;
                                                      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
                                                      gap: 25px;
                                                      margin: 30px 0;
                                                    }

                                                    .findings-card {
                                                      background: white;
                                                      border-radius: 16px;
                                                      padding: 30px;
                                                      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
                                                      border-top: 4px solid #667eea;
                                                    }

                                                    .findings-title {
                                                      display: flex;
                                                      align-items: center;
                                                      gap: 12px;
                                                      margin-bottom: 20px;
                                                      color: #2c3e50;
                                                      font-size: 1.3rem;
                                                      font-weight: 600;
                                                    }

                                                    .findings-list {
                                                      list-style: none;
                                                      padding: 0;
                                                    }

                                                    .findings-list li {
                                                      padding: 12px 0;
                                                      border-bottom: 1px solid #ecf0f1;
                                                      position: relative;
                                                      padding-left: 25px;
                                                    }

                                                    .findings-list li:last-child {
                                                      border-bottom: none;
                                                    }

                                                    .findings-list li::before {
                                                      content: "";
                                                      position: absolute;
                                                      left: 0;
                                                      color: #667eea;
                                                      font-weight: bold;
                                                    }

                                                    .action-section {
                                                      display: flex;
                                                      justify-content: center;
                                                      gap: 20px;
                                                      margin: 40px 0;
                                                      flex-wrap: wrap;
                                                    }

                                                    .action-btn {
                                                      padding: 15px 30px;
                                                      border: none;
                                                      border-radius: 50px;
                                                      font-size: 1rem;
                                                      font-weight: 600;
                                                      cursor: pointer;
                                                      transition: all 0.3s ease;
                                                      text-decoration: none;
                                                      display: inline-flex;
                                                      align-items: center;
                                                      gap: 10px;
                                                      text-transform: uppercase;
                                                      letter-spacing: 1px;
                                                    }

                                                    .btn-primary {
                                                      background: linear-gradient(135deg, #667eea, #764ba2);
                                                      color: white;
                                                      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
                                                    }

                                                    .btn-primary:hover {
                                                      transform: translateY(-3px);
                                                      box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
                                                    }

                                                    .btn-secondary {
                                                      background: linear-gradient(135deg, #00b894, #00cec9);
                                                      color: white;
                                                      box-shadow: 0 8px 25px rgba(0, 184, 148, 0.3);
                                                    }

                                                    .btn-secondary:hover {
                                                      transform: translateY(-3px);
                                                      box-shadow: 0 15px 35px rgba(0, 184, 148, 0.4);
                                                    }

                                                    .disclaimer {
                                                      background: linear-gradient(135deg, #fff3cd, #ffeaa7);
                                                      border: 2px solid #f39c12;
                                                      border-radius: 16px;
                                                      padding: 30px;
                                                      margin: 40px 0;
                                                      box-shadow: 0 8px 30px rgba(243, 156, 18, 0.1);
                                                    }

                                                    .disclaimer-title {
                                                      display: flex;
                                                      align-items: center;
                                                      gap: 12px;
                                                      margin-bottom: 15px;
                                                      color: #d68910;
                                                      font-size: 1.3rem;
                                                      font-weight: 700;
                                                    }

                                                    .disclaimer p {
                                                      color: #8b6914;
                                                      font-size: 1rem;
                                                      line-height: 1.7;
                                                    }

                                                    @media (max-width: 768px) {
                                                      .container {
                                                        padding: 10px;
                                                      }

                                                      .report-header h1 {
                                                        font-size: 2rem;
                                                        flex-direction: column;
                                                        gap: 10px;
                                                      }

                                                      .meta-info,
                                                      .risk-assessment,
                                                      .structures-grid,
                                                      .findings-grid {
                                                        grid-template-columns: 1fr;
                                                      }

                                                      .action-section {
                                                        flex-direction: column;
                                                        align-items: center;
                                                      }

                                                      .action-btn {
                                                        width: 100%;
                                                        max-width: 300px;
                                                        justify-content: center;
                                                      }
                                                    }

                                                    .loading-animation {
                                                      display: inline-block;
                                                      width: 20px;
                                                      height: 20px;
                                                      border: 3px solid rgba(255, 255, 255, 0.3);
                                                      border-radius: 50%;
                                                      border-top-color: #fff;
                                                      animation: spin 1s ease-in-out infinite;
                                                    }

                                                    @keyframes spin {
                                                      to {
                                                        transform: rotate(360deg);
                                                      }
                                                    }

                                                    .pulse {
                                                      animation: pulse 2s infinite;
                                                    }

                                                    @keyframes pulse {
                                                      0% {
                                                        transform: scale(1);
                                                      }
                                                      50% {
                                                        transform: scale(1.05);
                                                      }
                                                      100% {
                                                        transform: scale(1);
                                                      }
                                                    }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Report Header -->
      <div class="report-header">
        <h1>
          <i class="fas fa-heartbeat"></i>
          Ultrasound Analysis Report
        </h1>
        <p class="subtitle">First Trimester Screening Results</p>
        <div
          class="status-badge {{ 'status-success' if results and results.get('success') else 'status-warning' }}"
        >
          <i
            class="fas {{ 'fa-check-circle' if results and results.get('success') else 'fa-exclamation-triangle' }}"
          ></i>
          {{ 'Analysis Complete' if results and results.get('success') else
          'Analysis Incomplete' }}
        </div>
      </div>

      <!-- Metadata Cards -->
      <div class="meta-info">
        <div class="meta-card">
          <div class="meta-card-header">
            <div class="meta-card-icon icon-date">
              <i class="fas fa-calendar-alt"></i>
            </div>
            <div>
              <h3>Analysis Date</h3>
              <p>
                {{ analysis_results.timestamp if analysis_results else 'N/A' }}
              </p>
            </div>
          </div>
        </div>

        <div class="meta-card">
          <div class="meta-card-header">
            <div class="meta-card-icon icon-weeks">
              <i class="fas fa-baby"></i>
            </div>
            <div>
              <h3>Gestational Age</h3>
              <p>
                {{ analysis_results.gestational_weeks if analysis_results and
                analysis_results.gestational_weeks else '11-14' }} weeks
              </p>
            </div>
          </div>
        </div>

        <div class="meta-card">
          <div class="meta-card-header">
            <div class="meta-card-icon icon-age">
              <i class="fas fa-user"></i>
            </div>
            <div>
              <h3>Maternal Age</h3>
              <p>
                {{ analysis_results.maternal_age if analysis_results and
                analysis_results.maternal_age else '30' }} years
              </p>
            </div>
          </div>
        </div>

        <div class="meta-card">
          <div class="meta-card-header">
            <div class="meta-card-icon icon-method">
              <i class="fas fa-microscope"></i>
            </div>
            <div>
              <h3>Analysis Method</h3>
              <p>YOLOv8 AI Detection</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Risk Assessment Section -->

      <!-- Annotated Image Section -->
      {% if annotated_image_url %}
      <div class="analysis-section">
        <div class="section-title">
          <div class="section-icon">
            <i class="fas fa-image"></i>
          </div>
          <h2>Annotated Analysis Image</h2>
        </div>
        <div class="image-section">
          <img
            src="{{ annotated_image_url }}"
            alt="Annotated Ultrasound"
            class="annotated-image"
          />
          <p style="margin-top: 20px; color: #7f8c8d; font-size: 1rem">
            <i class="fas fa-info-circle"></i>
            Green boxes indicate detected structures with confidence scores
          </p>
        </div>
      </div>
      {% endif %} {% if annotated_image_url %} src="{{
      analysis_results.analysis_chart_url }}" alt="Summary Chart" /> {% endif %}
      {% if analysis_results.detected_structures %}
      <div class="card structures-section">
        <div class="card-header">
          <i class="fas fa-list-check"></i>
          <h3>Detected Structures</h3>
        </div>
        <div class="structures-list">
          {% for structure in analysis_results.detected_structures %} {% set
          confidence =
          analysis_results.detection_confidences[structure]|default(0.0) %} {%
          set confidence_percent = (confidence * 100)|round(1) %}
          <div class="structure-item">
            <span class="structure-name">{{ structure }}</span>
            <div class="confidence-bar">
              <div class="confidence-progress">
                <div
                  class="confidence-bar-fill"
                  style="
          width: {{ confidence_percent }}%;
          background:
            {% if confidence_percent >= 80 %}
              linear-gradient(90deg, #48bb78, #38a169);
            {% elif confidence_percent >= 60 %}
              linear-gradient(90deg, #ed8936, #dd6b20);
            {% else %}
              linear-gradient(90deg, #f56565, #e53e3e);
            {% endif %}
        "
                ></div>
              </div>
            </div>

            <span class="confidence-percent">{{ confidence_percent }}%</span>
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %} {% if summary %}
      <div class="card summhttp://127.0.0.1:5000ary-section">
        <div class="card-header">
          <i class="fas fa-clipboard-check"></i>
          <h3>Analysis Overview</h3>
        </div>
        <div class="summary-grid">
          <div class="summary-item">
            <span class="summary-label">Structures Found</span>
            <span class="summary-value"
              >{{ summary.detection_summary.total_structures_detected }}</span
            >
          </div>
          <div class="summary-item">
            <span class="summary-label">Average Confidence</span>
            <span class="summary-value"
              >{{ (summary.detection_summary.average_confidence * 100)|round(1)
              }}%</span
            >
          </div>
          <div class="summary-item">
            <span class="summary-label">Overall Risk Level</span>
            <span class="summary-value"
              >{{ summary.risk_assessment.risk_level }}</span
            >
          </div>
        </div>
      </div>
      {% endif %}
      <!-- Clinical Interpretation Section -->

      <div class="analysis-section">
        <div class="section-title">
          <div class="section-icon">
            <i class="fas fa-stethoscope"></i>
          </div>
          <h2>Clinical Interpretation</h2>
        </div>

        <div class="findings-grid">
          <!-- Primary Findings -->
          <div class="findings-card">
            <div class="findings-title">
              <i class="fas fa-clipboard-check"></i>
              Primary Findings
            </div>
            <ul class="findings-list">
              {% if nt_measurement %} {% if nt_measurement >= 3.5 %}
              <li>
                INCREASED NUCHAL TRANSLUCENCY: {{ nt_measurement }} mm (>95th
                percentile)
              </li>
              <li>HIGH RISK for chromosomal abnormalities</li>
              {% elif nt_measurement >= 2.5 %}
              <li>
                MODERATELY INCREASED NUCHAL TRANSLUCENCY: {{ nt_measurement }}
                mm
              </li>
              <li>MODERATE RISK - Enhanced screening recommended</li>
              {% else %}
              <li>NORMAL NUCHAL TRANSLUCENCY: {{ nt_measurement }} mm</li>
              <li>LOW RISK first trimester screening result</li>
              {% endif %} {% else %}
              <li>Nuchal translucency measurement not obtained</li>
              <li>Consider repeat scan for complete assessment</li>
              {% endif %} {% if analysis_results and
              analysis_results.detected_structures %} {% if 'Nasal Bone' in
              analysis_results.detected_structures %}
              <li>
                NASAL BONE PRESENT - Reassuring finding for aneuploidy screening
              </li>
              {% else %}
              <li>NASAL BONE - Suboptimal visualization</li>
              <li>
                NASAL BONE - Suboptimal visualization (consider repeat scan)
              </li>
              {% endif %} {% endif %}
            </ul>
          </div>

          <!-- Recommendations -->
          <div class="findings-card">
            <div class="findings-title">
              <i class="fas fa-clipboard-list"></i>
              Recommendations
            </div>
            <ul class="findings-list">
              {% if nt_measurement %} {% if nt_measurement >= 3.5 %}
              <li>
                <strong>URGENT:</strong> Genetic counseling consultation within
                48 hours
              </li>
              <li>
                <strong>URGENT:</strong> Offer diagnostic testing
                (CVS/amniocentesis)
              </li>
              <li>Detailed fetal echocardiography at 18-22 weeks</li>
              <li>Multidisciplinary team consultation</li>
              {% elif nt_measurement >= 2.5 %}
              <li>Enhanced genetic screening recommended</li>
              <li>Detailed anatomy scan at 18-22 weeks</li>
              <li>Consider genetic counseling consultation</li>
              {% else %}
              <li>Continue routine antenatal care</li>
              <li>Standard second trimester anatomy scan</li>
              {% endif %} {% else %}
              <li>
                <strong>IMMEDIATE:</strong> Repeat first trimester scan within 1
                week
              </li>
              <li>Ensure optimal imaging technique for NT measurement</li>
              {% endif %}
              <li>Discuss findings with healthcare provider</li>
              <li>Follow routine antenatal care schedule</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Disclaimer Section -->
      <div class="disclaimer">
        <div class="disclaimer-title">
          <i class="fas fa-exclamation-triangle"></i>
          Important Disclaimer
        </div>
        <p>
          This report is generated using automated artificial intelligence
          analysis and is intended for screening purposes only. It should not
          replace clinical judgment or definitive diagnostic procedures. All
          findings should be interpreted by qualified medical professionals in
          the context of clinical history and additional testing. This analysis
          is based on image quality and technical factors that may affect
          accuracy. Negative findings do not rule out the presence of
          abnormalities, and positive findings require clinical correlation and
          further evaluation.
        </p>
      </div>

      <!-- Action Buttons -->
      <div class="action-section">
        <a
          href="{{ url_for('download_report') }}"
          class="action-btn btn-primary pulse"
        >
          <i class="fas fa-file-pdf"></i>
          Download PDF Report
        </a>
        <a href="{{ url_for('index') }}" class="action-btn btn-secondary">
          <i class="fas fa-redo"></i>
          New Analysis
        </a>
      </div>
    </div>

    <script>
      // Animate confidence bars on page load
      document.addEventListener("DOMContentLoaded", function () {
        const confidenceBars = document.querySelectorAll(".confidence-fill");
        confidenceBars.forEach((bar) => {
          const width = bar.style.width;
          bar.style.width = "0";
          setTimeout(() => {
            bar.style.width = width;
          }, 100);
        });

        // Add animation to risk cards
        const riskCards = document.querySelectorAll(".risk-card");
        riskCards.forEach((card, index) => {
          card.style.opacity = "0";
          card.style.transform = "translateY(20px)";
          card.style.transition = "all 0.5s ease " + index * 0.1 + "s";
          setTimeout(() => {
            card.style.opacity = "1";
            card.style.transform = "translateY(0)";
          }, 100);
        });
      });

      // Handle PDF download with loading state
      document
        .querySelector(".btn-primary")
        .addEventListener("click", function (e) {
          if (this.href.includes("download_report")) {
            e.preventDefault();
            const btn = this;
            const originalHtml = btn.innerHTML;
            btn.innerHTML =
              '<span class="loading-animation"></span> Generating Report...';
            btn.disabled = true;

            // Simulate PDF generation delay
            setTimeout(() => {
              window.location.href = btn.href;
              btn.innerHTML = originalHtml;
              btn.disabled = false;
            }, 2000);
          }
        });

      // Print functionality
      document
        .querySelector(".btn-print")
        .addEventListener("click", function () {
          window.print();
        });
    </script>
  </body>
</html>
